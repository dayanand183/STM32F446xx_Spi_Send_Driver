/*
 * stm32f446xx_spi_driver.h
 *
 *  Created on: 06-Feb-2026
 *      Author: dayanand
 */

#ifndef INC_STM32F446XX_SPI_DRIVER_H_
#define INC_STM32F446XX_SPI_DRIVER_H_

#include "stm32f446xx.h"

typedef struct
{
	uint8_t SPI_DeviceMode;					/* Defines the mode of SPI @SPI_DEVICEMODES */
	uint8_t SPI_BusConfig;					/* Bus Configuration for SPI @SPI_BUSCONFIGURE */
	uint8_t SPI_SclkSpeed;					/* Serial Clock Speed for SPI @SPI_SCLKSPEED */
	uint8_t SPI_DFF;						/* Date Bits @SPI_DFF */
	uint8_t CPOL;							/* Set the Clock polarity @SPI_CPOL */
	uint8_t CPHA;							/* Set the Clock polarity @SPI_CPHA */
	uint8_t SSM;							/* Set the value for spi @SSM */
}SPI_Config_t;


typedef struct
{
	SPI_RegDef_t *pSPIx;
	SPI_Config_t SPI_Config;
}SPI_Handle_t;


/*
 * @SPI_DEVICEMODES
 */

#define SPI_DEVICE_MASTERMODE				1
#define SPI_DEVICE_SLAVEMODE				0

/*
 * @SPI_BUSCONFIGURE
 */

#define SPI_FULL_DUPLEX						1
#define SPI_HALF_DUPLEX						2
#define SPI_SIMPLEX_RX_ONLY					3

/*
 * @SPI_SCLKSPEED
 */

#define SPI_SCLK_SPEED_DIV2					0
#define SPI_SCLK_SPEED_DIV4					1
#define SPI_SCLK_SPEED_DIV8					2
#define SPI_SCLK_SPEED_DIV16				3
#define SPI_SCLK_SPEED_DIV32				4
#define SPI_SCLK_SPEED_DIV64				5
#define SPI_SCLK_SPEED_DIV128				6
#define SPI_SCLK_SPEED_DIV256				7

/*
 * @SPI_DFF
 */

#define SPI_8BITS_DFF						0
#define SPI_16BITS_DFF						1

/*
 * @CPOL
 */
#define SPI_CPOL_HIGH						1
#define SPI_CPOL_LOW						0

/*
 * @CPHA
 */

#define SPI_CPHA_HIGH						1
#define SPI_CPHA_LOW						0

/*
 * @SSM
 */

#define SPI_SSM_EN							1
#define SPI_SSM_DIS							0

/*
 * SPI related status flags
 */

#define SPI_TXE_FLAG						(1 << SPI_SR_TXE)


void SPI_InIt(SPI_Handle_t *pSPIHandle);
void SPI_DeInIt(SPI_RegDef_t *pSPIx);

void SPI_PClockControl(SPI_RegDef_t *pSPIx, uint8_t enordis);

void SPI_DataSend(SPI_RegDef_t *pSPIx, uint8_t *pTxBuffer, uint32_t len);
void SPI_DataRecieve(SPI_RegDef_t *pSPIx, uint8_t *pRxBuffer, uint32_t len);

void SPI_IRQInterruptConfig(uint8_t IRQNumber, uint8_t enordi);
void SPI_IRQPriorityConfig(uint8_t IRQNumber, uint8_t enordi);
void SPI_IRQHandling(SPI_Handle_t *pSPIx);

void SPI_Enable(SPI_RegDef_t *pSPIx, uint8_t enordis);
void SPI_SSIConfig(SPI_RegDef_t *pSPIx, uint8_t enordis);
void SPI_GetFlagStaus(SPI_RegDef_t *pSPIx, uint8_t enordis);


#endif /* INC_STM32F446XX_SPI_DRIVER_H_ */
